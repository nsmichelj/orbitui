{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "popover",
  "files": [
    {
      "path": "../src/components/ui/popover/index.ts",
      "content": "import Popover from \"./Popover.astro\";\r\nimport PopoverContent from \"./PopoverContent.astro\";\r\nimport { popoverArrowVariants, popoverVariants } from \"./popoverVariants\";\r\n\r\nexport { Popover, popoverArrowVariants, PopoverContent, popoverVariants };\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/popover/Popover.astro",
      "content": "<div class=\"relative\" data-popover>\r\n  <slot />\r\n</div>\r\n\r\n<script>\r\n  import { Popover } from \"./popover\";\r\n\r\n  function init() {\r\n    const popovers = document.querySelectorAll<HTMLElement>(\"[data-popover]\");\r\n    popovers.forEach((dropdown) => {\r\n      new Popover(dropdown);\r\n    });\r\n  }\r\n\r\n  init();\r\n  document.addEventListener(\"astro:page-load\", () => init());\r\n</script>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/popover/popover.ts",
      "content": "export class Popover {\n  private dropdownMenu: HTMLElement;\n  private trigger: HTMLElement | null;\n  private content: HTMLElement | null;\n\n  constructor(dropowndMenu: HTMLElement) {\n    this.dropdownMenu = dropowndMenu;\n    this.content = this.dropdownMenu.querySelector(\"[data-popover-content]\");\n    this.trigger = this.dropdownMenu.querySelector(\"[data-trigger]\");\n\n    if (!this.content || !this.trigger) {\n      console.error(\"Popover not initialized properly\", {\n        content: this.content,\n        trigger: this.trigger,\n      });\n      return;\n    }\n\n    this.init();\n  }\n\n  private init() {\n    this.setupAccessibility();\n    this.setupEventListeners();\n  }\n\n  private setupAccessibility() {\n    if (!this.trigger || !this.content) return;\n\n    const id =\n      this.content.id ||\n      `popover-id-${Math.random().toString(36).substring(2, 9)}`;\n    this.content.id = id;\n    this.trigger.setAttribute(\"aria-describedby\", id);\n    this.setState(\"closed\");\n  }\n\n  private setupEventListeners() {\n    if (!this.trigger || !this.content) return;\n\n    this.trigger.addEventListener(\"click\", () => this.popoverToggle());\n\n    this.content.addEventListener(\"click\", (e) => {\n      const target = e.target as HTMLElement;\n      const item = target.closest('[role=\"menuitem\"]') as HTMLElement;\n\n      if (item && item.dataset.disabled !== \"true\") {\n        this.closePopover();\n      }\n    });\n\n    document.addEventListener(\"click\", (e) => {\n      const target = e.target as HTMLElement;\n\n      if (this.content?.dataset.state !== \"open\") return;\n\n      const clickedOutside = !this.content.contains(target);\n      const clickedTrigger = this.trigger?.contains(target);\n\n      if (clickedOutside && !clickedTrigger) {\n        this.closePopover(false);\n      }\n    });\n\n    this.trigger.addEventListener(\"keydown\", (e) => {\n      const isOpen = this.content?.dataset.state === \"open\";\n      if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        this.popoverToggle();\n      } else if (e.key === \"Escape\" && isOpen) {\n        e.preventDefault();\n        this.closePopover();\n      }\n    });\n\n    document.addEventListener(\"keydown\", (e) => this.handleKeydown(e));\n  }\n\n  private popoverToggle() {\n    if (this.content?.dataset.state === \"open\") {\n      this.closePopover();\n    } else {\n      this.openPopover();\n    }\n  }\n\n  private openPopover() {\n    this.content?.classList.remove(\"hidden\");\n\n    window.setTimeout(() => {\n      this.setState(\"open\");\n    }, 0);\n  }\n\n  private closePopover(shouldReturnFocus: boolean = true) {\n    this.setState(\"closed\", shouldReturnFocus);\n\n    window.setTimeout(() => {\n      this.content?.classList.add(\"hidden\");\n    }, 100);\n  }\n\n  private setState(\n    state: \"open\" | \"closed\",\n    shouldReturnFocus: boolean = true,\n  ) {\n    if (state === \"closed\" && shouldReturnFocus) {\n      this.trigger?.focus();\n    }\n\n    this.content?.setAttribute(\"aria-hidden\", `${state === \"closed\"}`);\n    this.content?.setAttribute(\"data-state\", state);\n  }\n\n  private handleKeydown = (event: KeyboardEvent) => {\n    if (event.key === \"Escape\" && this.content!.dataset.state === \"open\") {\n      this.closePopover();\n      event.preventDefault();\n    }\n  };\n}\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/popover/PopoverContent.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { HTMLAttributes } from \"astro/types\";\r\nimport type { VariantProps } from \"class-variance-authority\";\r\nimport { popoverArrowVariants, popoverVariants } from \"./popoverVariants\";\r\n\r\ninterface Props\r\n  extends HTMLAttributes<\"div\">,\r\n    VariantProps<typeof popoverVariants> {\r\n  sideOffset?: number;\r\n  arrow?: boolean;\r\n}\r\n\r\nconst {\r\n  class: className,\r\n  side,\r\n  alignment,\r\n  sideOffset = 2,\r\n  arrow = false,\r\n  ...attrs\r\n} = Astro.props;\r\n---\r\n\r\n<div\r\n  {...attrs}\r\n  role=\"dialog\"\r\n  data-popover-content\r\n  aria-hidden=\"true\"\r\n  data-state=\"closed\"\r\n  data-side={sideOffset}\r\n  data-alignment={alignment}\r\n  class={cn(popoverVariants({ side, alignment, className }))}\r\n  style={{\r\n    \"--tooltip-offset\": `calc(var(--spacing) * ${sideOffset})`,\r\n  }}\r\n>\r\n  <slot />\r\n  {arrow && <span class={cn(popoverArrowVariants({ side, alignment }))} />}\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/popover/popoverVariants.ts",
      "content": "import { cva } from \"class-variance-authority\";\r\n\r\nconst baseClass = [\r\n  \"hidden absolute z-50 bg-surface border border-border p-4 rounded-md\",\r\n  \"transform duration-100 transition-all ease-in data-[state=closed]:opacity-0 data-[state=closed]:scale-95 data[state=open]:opacity-100 data[state=open]:scale-100\",\r\n];\r\n\r\nconst popoverVariants = cva(baseClass, {\r\n  variants: {\r\n    side: {\r\n      top: \"bottom-full mb-(--tooltip-offset)\",\r\n      bottom: \"top-full mt-(--tooltip-offset)\",\r\n      left: \"right-full mr-(--tooltip-offset)\",\r\n      right: \"left-full ml-(--tooltip-offset)\",\r\n    },\r\n    alignment: {\r\n      start: \"\",\r\n      center: \"\",\r\n      end: \"\",\r\n    },\r\n  },\r\n  compoundVariants: [\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"start\",\r\n      class: \"left-0\",\r\n    },\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"end\",\r\n      class: \"left-full -translate-x-full\",\r\n    },\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"center\",\r\n      class: \"left-1/2 -translate-x-1/2\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"start\",\r\n      class: \"top-0 -translate-y-0\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"center\",\r\n      class: \"top-1/2 -translate-y-1/2\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"end\",\r\n      class: \"top-full -translate-y-full\",\r\n    },\r\n  ],\r\n  defaultVariants: {\r\n    side: \"bottom\",\r\n    alignment: \"center\",\r\n  },\r\n});\r\n\r\nconst arrowClass =\r\n  \"absolute w-0 h-0 transition-all transform ease-in size-2 bg-surface transform rotate-45 border-border\";\r\n\r\nconst popoverArrowVariants = cva(arrowClass, {\r\n  variants: {\r\n    side: {\r\n      top: \"top-full -mt-1 border-b border-r\",\r\n      bottom: \"bottom-full -mb-1 border-t border-l\",\r\n      left: \"left-full -ml-1 border-t border-r\",\r\n      right: \"right-full -mr-1 border-b border-l\",\r\n    },\r\n    alignment: {\r\n      start: \"\",\r\n      center: \"\",\r\n      end: \"\",\r\n    },\r\n  },\r\n  compoundVariants: [\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"start\",\r\n      class: \"left-0 ml-3 \",\r\n    },\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"end\",\r\n      class: \"right-0 mr-3\",\r\n    },\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"center\",\r\n      class: \"left-1/2 -translate-x-1/2\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"start\",\r\n      class: \"top-0 mt-3\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"center\",\r\n      class: \"top-1/2 -translate-y-1/2\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"end\",\r\n      class: \"bottom-0 mb-3\",\r\n    },\r\n  ],\r\n  defaultVariants: {\r\n    side: \"bottom\",\r\n    alignment: \"center\",\r\n  },\r\n});\r\n\r\nexport { popoverArrowVariants, popoverVariants };\r\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}

{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "drawer",
  "files": [
    {
      "path": "../src/components/ui/drawer/Drawer.astro",
      "content": "<div data-drawer-wrapper>\r\n  <slot />\r\n</div>\r\n\r\n<script>\r\n  import { Drawer } from \"./drawer\";\r\n\r\n  function init() {\r\n    const drawers = document.querySelectorAll<HTMLElement>(\r\n      \"[data-drawer-wrapper]\",\r\n    );\r\n    drawers.forEach((modal) => {\r\n      new Drawer(modal);\r\n    });\r\n  }\r\n\r\n  init();\r\n  document.addEventListener(\"astro:page-load\", () => init());\r\n</script>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/drawer/drawer.ts",
      "content": "export class Drawer {\n  private wrapper: HTMLElement;\n  private drawer: HTMLElement | null;\n  private trigger: HTMLElement | null;\n  private backdrop: HTMLElement | null;\n  private closeButtons: NodeListOf<HTMLElement> | null;\n\n  constructor(drawerWrraper: HTMLElement) {\n    this.wrapper = drawerWrraper;\n    this.drawer = this.wrapper.querySelector(\"[data-drawer-content]\");\n    this.backdrop = this.wrapper.querySelector(\"[data-drawer-backdrop]\");\n    this.trigger = this.wrapper.querySelector(\"[data-trigger]\");\n    this.closeButtons =\n      this.wrapper.querySelectorAll<HTMLElement>(\"[data-close]\");\n\n    if (!this.drawer || !this.trigger) {\n      console.error(\"Drawer not initialized properly\", {\n        drawer: this.drawer,\n        trigger: this.trigger,\n      });\n      return;\n    }\n\n    this.init();\n  }\n\n  private init() {\n    this.setupAccessibility();\n    this.setupEventListeners();\n  }\n\n  private setupAccessibility() {\n    const title = this.drawer?.querySelector<HTMLElement>(\n      \"h1, h2, h3, h4, h5, h6\",\n    );\n\n    if (title) {\n      const id =\n        title.id || `drawer-id-${Math.random().toString(36).substring(2, 9)}`;\n      title.id = id;\n      this.drawer?.setAttribute(\"aria-describedby\", id);\n    }\n\n    this.setState(\"closed\");\n  }\n\n  private setupEventListeners() {\n    this.trigger!.addEventListener(\"click\", () => this.openDrawer());\n\n    if (this.drawer?.dataset.allowOutsideClick === \"true\") {\n      this.backdrop?.addEventListener(\"click\", () => this.closeDrawer());\n      document.addEventListener(\"click\", (e) => {\n        const target = e.target as HTMLElement;\n\n        if (this.drawer?.dataset.state !== \"open\") return;\n\n        const clickedOutside = !this.drawer.contains(target);\n        const clickedTrigger = this.trigger?.contains(target);\n\n        if (clickedOutside && !clickedTrigger) {\n          this.closeDrawer(false);\n        }\n      });\n    }\n\n    this.closeButtons?.forEach((trigger) => {\n      trigger.addEventListener(\"click\", () => this.closeDrawer());\n    });\n\n    document.addEventListener(\"keydown\", (e) => this.handleKeyDown(e));\n  }\n\n  private openDrawer() {\n    this.backdrop?.classList.remove(\"hidden\");\n    this.drawer?.classList.replace(\"hidden\", \"flex\");\n\n    document.body.classList.add(\"overflow-hidden\");\n    setTimeout(() => {\n      this.setState(\"open\");\n    }, 0);\n  }\n\n  private closeDrawer(shouldReturnFocus: boolean = true) {\n    this.setState(\"closed\", shouldReturnFocus);\n\n    setTimeout(() => {\n      this.backdrop?.classList.add(\"hidden\");\n      this.drawer?.classList.replace(\"flex\", \"hidden\");\n      document.body.classList.remove(\"overflow-hidden\");\n    }, 200);\n  }\n\n  private setState(\n    state: \"open\" | \"closed\",\n    shouldReturnFocus: boolean = true,\n  ) {\n    if (state === \"closed\" && shouldReturnFocus) {\n      this.trigger?.focus();\n    }\n\n    this.drawer?.setAttribute(\"aria-hidden\", `${state === \"closed\"}`);\n    this.drawer?.setAttribute(\"data-state\", state);\n    this.backdrop?.setAttribute(\"aria-hidden\", `${state === \"closed\"}`);\n    this.backdrop?.setAttribute(\"data-state\", state);\n  }\n\n  private handleKeyDown = (event: KeyboardEvent) => {\n    if (event.key === \"Escape\" && this.drawer!.dataset.status === \"open\") {\n      this.closeDrawer();\n      event.preventDefault();\n    }\n  };\n}\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/drawer/DrawerContent.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { HTMLAttributes } from \"astro/types\";\r\nimport type { VariantProps } from \"class-variance-authority\";\r\nimport { drawerVariants } from \"./drawerVariants\";\r\n\r\ninterface Props\r\n  extends HTMLAttributes<\"div\">,\r\n    VariantProps<typeof drawerVariants> {\r\n  showCloseButton?: boolean;\r\n  backdrop?: boolean;\r\n  allowOutsideClick?: boolean;\r\n}\r\n\r\nconst {\r\n  class: className,\r\n  showCloseButton = true,\r\n  backdrop = true,\r\n  allowOutsideClick = true,\r\n  position = \"right\",\r\n  size = \"sm\",\r\n  ...attrs\r\n} = Astro.props;\r\n---\r\n\r\n{\r\n  backdrop && (\r\n    <div\r\n      aria-hidden=\"true\"\r\n      data-state=\"closed\"\r\n      data-drawer-backdrop\r\n      class=\"bg-background fixed inset-0 left-0 top-0 z-50 hidden h-dvh w-full transition-opacity duration-100 data-[state=closed]:opacity-0 data-[state=open]:opacity-80\"\r\n    />\r\n  )\r\n}\r\n\r\n<div\r\n  data-drawer-content\r\n  aria-hidden=\"true\"\r\n  data-state=\"closed\"\r\n  data-position={position}\r\n  data-show-close-button={showCloseButton}\r\n  data-allow-outside-click={allowOutsideClick}\r\n  class={cn(drawerVariants({ position, size, className }))}\r\n  {...attrs}\r\n>\r\n  {\r\n    showCloseButton && (\r\n      <button\r\n        class=\"text-foreground hover:bg-muted absolute right-3 top-3 cursor-pointer rounded-lg p-1 transition-colors duration-150\"\r\n        aria-label=\"close modal\"\r\n        data-close\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          viewBox=\"0 0 24 24\"\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          stroke-width=\"2\"\r\n          stroke-linecap=\"round\"\r\n          stroke-linejoin=\"round\"\r\n          class=\"size-4\"\r\n        >\r\n          <>\r\n            <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n            <path d=\"M18 6l-12 12\" />\r\n            <path d=\"M6 6l12 12\" />\r\n          </>\r\n        </svg>\r\n      </button>\r\n    )\r\n  }\r\n  <slot />\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/drawer/DrawerDescription.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport { type HTMLAttributes } from \"astro/types\";\r\n\r\ninterface Props extends HTMLAttributes<\"p\"> {}\r\n\r\nconst { class: className, ...attrs } = Astro.props;\r\n---\r\n\r\n<p {...attrs} class={cn(\"font-normal text-muted-foreground\", className)}>\r\n  <slot />\r\n</p>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/drawer/DrawerFooter.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport { type HTMLAttributes } from \"astro/types\";\r\n\r\ninterface Props extends HTMLAttributes<\"div\"> {}\r\n\r\nconst { class: className, ...attrs } = Astro.props;\r\n---\r\n\r\n<div\r\n  class={cn(\"pt-4 flex items-center justify-end gap-2\", className)}\r\n  {...attrs}\r\n>\r\n  <slot />\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/drawer/DrawerHeader.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport { type HTMLAttributes } from \"astro/types\";\r\n\r\ninterface Props extends HTMLAttributes<\"div\"> {}\r\n\r\nconst { class: className, ...attrs } = Astro.props;\r\n---\r\n\r\n<div class={cn(\"flex flex-col gap-1 pb-4\", className)} {...attrs}>\r\n  <slot />\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/drawer/DrawerTitle.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport { type HTMLAttributes } from \"astro/types\";\r\n\r\ninterface Props extends HTMLAttributes<\"h5\"> {}\r\n\r\nconst { class: className, ...attrs } = Astro.props;\r\n---\r\n\r\n<h2\r\n  {...attrs}\r\n  class={cn(\r\n    \"flex items-center justify-start gap-2 text-2xl font-semibold tracking-tight\",\r\n    className,\r\n  )}\r\n>\r\n  <slot />\r\n</h2>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/drawer/drawerVariants.ts",
      "content": "import { cva } from \"class-variance-authority\";\r\n\r\nconst baseClass =\r\n  \"hidden fixed flex-col z-50 p-6 bg-surface text-foreground border-border shadow-sm transform duration-200 transition-all ease-in-out data-[state=closed]:opacity-0 data-[state=open]:opacity-100\";\r\n\r\nconst drawerVariants = cva(baseClass, {\r\n  variants: {\r\n    position: {\r\n      top: \"w-full top-0 left-0 border-b data-[state=closed]:-translate-y-full data-[state=open]:translate-y-0 mb-8\",\r\n      bottom:\r\n        \"w-full bottom-0 left-0 border-t data-[state=closed]:translate-y-full data-[state=open]:translate-y-0 mt-8\",\r\n      left: \"h-dvh top-0 left-0 border-r data-[state=closed]:-translate-x-full data-[state=open]:translate-x-0 mr-8\",\r\n      right:\r\n        \"h-dvh top-0 right-0 border-l data-[state=closed]:translate-x-full data-[state=open]:translate-x-0 ml-8\",\r\n    },\r\n    size: {\r\n      xs: \"\",\r\n      sm: \"\",\r\n      md: \"\",\r\n      lg: \"\",\r\n      xl: \"\",\r\n      full: \"\",\r\n    },\r\n  },\r\n  compoundVariants: [\r\n    {\r\n      position: [\"left\", \"right\"],\r\n      size: \"sm\",\r\n      class: \"max-w-sm\",\r\n    },\r\n    {\r\n      position: [\"left\", \"right\"],\r\n      size: \"md\",\r\n      class: \"max-w-md\",\r\n    },\r\n    {\r\n      position: [\"left\", \"right\"],\r\n      size: \"lg\",\r\n      class: \"max-w-lg\",\r\n    },\r\n    {\r\n      position: [\"left\", \"right\"],\r\n      size: \"xl\",\r\n      class: \"max-w-xl\",\r\n    },\r\n    {\r\n      position: [\"left\", \"right\"],\r\n      size: \"full\",\r\n      class: \"w-full\",\r\n    },\r\n    {\r\n      position: [\"top\", \"bottom\"],\r\n      size: \"sm\",\r\n      class: \"max-h-[var(--container-sm)]\",\r\n    },\r\n    {\r\n      position: [\"top\", \"bottom\"],\r\n      size: \"md\",\r\n      class: \"max-h-[var(--container-md)]\",\r\n    },\r\n    {\r\n      position: [\"top\", \"bottom\"],\r\n      size: \"lg\",\r\n      class: \"max-h-[var(--container-lg)]\",\r\n    },\r\n    {\r\n      position: [\"top\", \"bottom\"],\r\n      size: \"xl\",\r\n      class: \"max-h-[var(--container-xl)]\",\r\n    },\r\n    {\r\n      position: [\"top\", \"bottom\"],\r\n      size: \"full\",\r\n      class: \"h-dvh\",\r\n    },\r\n  ],\r\n  defaultVariants: {\r\n    position: \"right\",\r\n    size: \"sm\",\r\n  },\r\n});\r\n\r\nexport { drawerVariants };\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/drawer/index.ts",
      "content": "import Drawer from \"./Drawer.astro\";\r\nimport DrawerContent from \"./DrawerContent.astro\";\r\nimport DrawerDescription from \"./DrawerDescription.astro\";\r\nimport DrawerFooter from \"./DrawerFooter.astro\";\r\nimport DrawerHeader from \"./DrawerHeader.astro\";\r\nimport DrawerTitle from \"./DrawerTitle.astro\";\r\nimport { drawerVariants } from \"./drawerVariants\";\r\n\r\nexport {\r\n  Drawer,\r\n  DrawerContent,\r\n  DrawerDescription,\r\n  DrawerFooter,\r\n  DrawerHeader,\r\n  DrawerTitle,\r\n  drawerVariants,\r\n};\r\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}

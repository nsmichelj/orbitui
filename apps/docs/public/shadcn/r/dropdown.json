{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "dropdown",
  "files": [
    {
      "path": "../src/components/ui/dropdown/dropdown.ts",
      "content": "export class DowndownMenu {\n  // References to tooltip elements\n  private dropdownMenu: HTMLElement;\n  private trigger: HTMLElement | null;\n  private content: HTMLElement | null;\n  private menuItems: HTMLElement[] = [];\n\n  constructor(dropowndMenu: HTMLElement) {\n    this.dropdownMenu = dropowndMenu;\n    this.content = this.dropdownMenu.querySelector(\"[data-dropdown-content]\");\n    this.trigger = this.dropdownMenu.querySelector(\"[data-trigger]\");\n    this.menuItems = Array.from(\n      this.content?.querySelectorAll(\n        '[role=\"menuitem\"]:not([data-disabled=\"true\"])',\n      ) || [],\n    );\n\n    if (!this.content || !this.trigger) {\n      console.error(\"Dropdown not initialized properly\", {\n        content: this.content,\n        trigger: this.trigger,\n      });\n      return;\n    }\n\n    this.init();\n  }\n\n  private init() {\n    this.setupAccessibility();\n    this.setupEventListeners();\n  }\n\n  private setupAccessibility() {\n    if (!this.trigger || !this.content) return;\n\n    const id =\n      this.content.id ||\n      `dropdown-id-${Math.random().toString(36).substring(2, 9)}`;\n    this.content.id = id;\n    this.trigger.setAttribute(\"aria-describedby\", id);\n    this.setState(\"closed\");\n  }\n\n  private setupEventListeners() {\n    if (!this.trigger || !this.content) return;\n\n    this.trigger.addEventListener(\"click\", () => this.toggleDropdown());\n\n    this.content.addEventListener(\"click\", (e) => {\n      const target = e.target as HTMLElement;\n      const item = target.closest('[role=\"menuitem\"]') as HTMLElement;\n\n      if (item && item.dataset.disabled !== \"true\") {\n        this.closeDropdown();\n      }\n    });\n\n    document.addEventListener(\"click\", (e) => {\n      const target = e.target as HTMLElement;\n\n      if (this.content?.dataset.state !== \"open\") return;\n\n      const clickedOutside = !this.content.contains(target);\n      const clickedTrigger = this.trigger?.contains(target);\n\n      if (clickedOutside && !clickedTrigger) {\n        this.closeDropdown(false);\n      }\n    });\n\n    this.trigger.addEventListener(\"keydown\", (e) => {\n      const isOpen = this.content?.dataset.state === \"open\";\n      if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        this.toggleDropdown();\n      } else if (e.key === \"Escape\" && isOpen) {\n        e.preventDefault();\n        this.closeDropdown();\n      } else if (isOpen && e.key === \"ArrowDown\") {\n        e.preventDefault();\n        this.setFocusItem(0);\n      } else if (isOpen && e.key === \"ArrowUp\") {\n        e.preventDefault();\n        this.setFocusItem(this.menuItems.length - 1);\n      }\n    });\n\n    this.menuItems.forEach((menuItem) => {\n      menuItem.addEventListener(\"keydown\", (e) =>\n        this.handleMenuKeydown(e, menuItem),\n      );\n    });\n    document.addEventListener(\"keydown\", (e) => this.handleKeydown(e));\n  }\n\n  private toggleDropdown() {\n    if (this.content?.dataset.state === \"open\") {\n      this.closeDropdown();\n    } else {\n      this.openDropdown();\n    }\n  }\n\n  private openDropdown() {\n    this.content?.classList.remove(\"hidden\");\n\n    window.setTimeout(() => {\n      this.setState(\"open\");\n    }, 0);\n  }\n\n  private closeDropdown(shouldReturnFocus: boolean = true) {\n    this.setState(\"closed\", shouldReturnFocus);\n\n    window.setTimeout(() => {\n      this.content?.classList.add(\"hidden\");\n    }, 100);\n  }\n\n  private setState(\n    state: \"open\" | \"closed\",\n    shouldReturnFocus: boolean = true,\n  ) {\n    if (state === \"closed\" && shouldReturnFocus) {\n      this.trigger?.focus();\n    }\n\n    this.content?.setAttribute(\"aria-hidden\", `${state === \"closed\"}`);\n    this.content?.setAttribute(\"data-state\", state);\n  }\n\n  private handleKeydown = (event: KeyboardEvent) => {\n    if (event.key === \"Escape\" && this.content!.dataset.state === \"open\") {\n      this.closeDropdown();\n      event.preventDefault();\n    }\n  };\n\n  private handleMenuKeydown(event: KeyboardEvent, item: HTMLElement) {\n    const currentItemIndex = this.menuItems.indexOf(item);\n\n    const keyActions: Record<string, () => void> = {\n      ArrowDown: () => this.setFocusItem(currentItemIndex + 1),\n      ArrowUp: () => this.setFocusItem(currentItemIndex - 1),\n      Home: () => this.setFocusItem(0),\n      End: () => this.setFocusItem(this.menuItems.length - 1),\n      Enter: () => item.click(),\n      \" \": () => item.click(),\n    };\n\n    const action = keyActions[event.key];\n    if (action) {\n      event.preventDefault();\n      action();\n    }\n  }\n\n  private setFocusItem(index: number) {\n    const newIndex = (index + this.menuItems.length) % this.menuItems.length;\n\n    if (this.menuItems[newIndex]) {\n      this.menuItems[newIndex].focus();\n    }\n  }\n}\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/dropdown/DropdownMenu.astro",
      "content": "<div class=\"relative\" data-dropdown-menu>\r\n  <slot />\r\n</div>\r\n\r\n<script>\r\n  import { DowndownMenu } from \"./dropdown\";\r\n\r\n  function init() {\r\n    const dropdowns = document.querySelectorAll<HTMLElement>(\r\n      \"[data-dropdown-menu]\",\r\n    );\r\n    dropdowns.forEach((dropdown) => {\r\n      new DowndownMenu(dropdown);\r\n    });\r\n  }\r\n\r\n  init();\r\n  document.addEventListener(\"astro:page-load\", () => init());\r\n</script>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/dropdown/DropdownMenuContent.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { HTMLAttributes } from \"astro/types\";\r\nimport type { VariantProps } from \"class-variance-authority\";\r\nimport {\r\n  dropdownArrowVariants,\r\n  dropdownMenuVariants,\r\n} from \"./dropdownVariants\";\r\n\r\ninterface Props\r\n  extends HTMLAttributes<\"div\">,\r\n    VariantProps<typeof dropdownMenuVariants> {\r\n  sideOffset?: number;\r\n  arrow?: boolean;\r\n}\r\n\r\nconst {\r\n  class: className,\r\n  side,\r\n  alignment,\r\n  sideOffset = 2,\r\n  arrow = false,\r\n  ...attrs\r\n} = Astro.props;\r\n---\r\n\r\n<div\r\n  {...attrs}\r\n  role=\"menu\"\r\n  data-dropdown-content\r\n  aria-hidden=\"true\"\r\n  data-state=\"closed\"\r\n  data-side={sideOffset}\r\n  data-alignment={alignment}\r\n  class={cn(dropdownMenuVariants({ side, alignment, className }))}\r\n  style={{\r\n    \"--tooltip-offset\": `calc(var(--spacing) * ${sideOffset})`,\r\n  }}\r\n>\r\n  <slot />\r\n  {arrow && <span class={cn(dropdownArrowVariants({ side, alignment }))} />}\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/dropdown/DropdownMenuGroup.astro",
      "content": "<div role=\"group\">\r\n  <slot />\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/dropdown/DropdownMenuItem.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { VariantProps } from \"class-variance-authority\";\r\nimport { dropdownMenuItemVariants } from \"./dropdownVariants\";\r\n\r\nimport type { HTMLTag, Polymorphic } from \"astro/types\";\r\n\r\ntype Props<Tag extends HTMLTag> = Polymorphic<{ as: Tag }> &\r\n  VariantProps<typeof dropdownMenuItemVariants>;\r\n\r\nconst {\r\n  class: className,\r\n  as: Tag = \"div\",\r\n  disabled = false,\r\n  ...attrs\r\n} = Astro.props;\r\n---\r\n\r\n<Tag\r\n  role=\"menuitem\"\r\n  tabindex={disabled ? \"-1\" : \"0\"}\r\n  data-disabled={disabled}\r\n  class={cn(dropdownMenuItemVariants({ disabled, className }))}\r\n  {...attrs}\r\n>\r\n  <slot />\r\n</Tag>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/dropdown/DropdownMenuLabel.astro",
      "content": "<div class=\"px-2 py-1.5 text-sm font-medium\">\r\n  <slot />\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/dropdown/DropdownMenuSeparator.astro",
      "content": "<div\r\n  role=\"separator\"\r\n  aria-orientation=\"horizontal\"\r\n  class=\"bg-border -mx-1 my-1 h-px\"\r\n>\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/dropdown/dropdownVariants.ts",
      "content": "import { cva } from \"class-variance-authority\";\r\n\r\nconst baseClass = [\r\n  \"hidden absolute z-50 bg-surface border border-border p-1 rounded-md\",\r\n  \"transform duration-100 transition-all ease-in data-[state=closed]:opacity-0 data-[state=closed]:scale-95 data[state=open]:opacity-100 data[state=open]:scale-100\",\r\n];\r\n\r\nconst dropdownMenuVariants = cva(baseClass, {\r\n  variants: {\r\n    side: {\r\n      top: \"bottom-full mb-(--tooltip-offset)\",\r\n      bottom: \"top-full mt-(--tooltip-offset)\",\r\n      left: \"right-full mr-(--tooltip-offset)\",\r\n      right: \"left-full ml-(--tooltip-offset)\",\r\n    },\r\n    alignment: {\r\n      start: \"\",\r\n      center: \"\",\r\n      end: \"\",\r\n    },\r\n  },\r\n  compoundVariants: [\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"start\",\r\n      class: \"left-0\",\r\n    },\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"end\",\r\n      class: \"left-full -translate-x-full\",\r\n    },\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"center\",\r\n      class: \"left-1/2 -translate-x-1/2\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"start\",\r\n      class: \"top-0 -translate-y-0\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"center\",\r\n      class: \"top-1/2 -translate-y-1/2\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"end\",\r\n      class: \"top-full -translate-y-full\",\r\n    },\r\n  ],\r\n  defaultVariants: {\r\n    side: \"bottom\",\r\n    alignment: \"center\",\r\n  },\r\n});\r\n\r\nconst dropdownMenuItemBaseClass =\r\n  \"flex justify-between items-center gap-2 px-2 py-1.5 text-sm cursor-default rounded-md outline-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg]:size-4\";\r\n\r\nconst dropdownMenuItemVariants = cva(dropdownMenuItemBaseClass, {\r\n  variants: {\r\n    disabled: {\r\n      false: \"hover:bg-foreground/5 focus:bg-foreground/5 \",\r\n      true: \"opacity-70 pointer-events-none\",\r\n    },\r\n  },\r\n  defaultVariants: {\r\n    disabled: false,\r\n  },\r\n});\r\n\r\nconst arrowClass =\r\n  \"absolute w-0 h-0 transition-all transform ease-in size-2 bg-surface transform rotate-45 border-border\";\r\n\r\nconst dropdownArrowVariants = cva(arrowClass, {\r\n  variants: {\r\n    side: {\r\n      top: \"top-full -mt-1 border-b border-r\",\r\n      bottom: \"bottom-full -mb-1 border-t border-l\",\r\n      left: \"left-full -ml-1 border-t border-r\",\r\n      right: \"right-full -mr-1 border-b border-l\",\r\n    },\r\n    alignment: {\r\n      start: \"\",\r\n      center: \"\",\r\n      end: \"\",\r\n    },\r\n  },\r\n  compoundVariants: [\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"start\",\r\n      class: \"left-0 ml-3 \",\r\n    },\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"end\",\r\n      class: \"right-0 mr-3\",\r\n    },\r\n    {\r\n      side: [\"top\", \"bottom\"],\r\n      alignment: \"center\",\r\n      class: \"left-1/2 -translate-x-1/2\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"start\",\r\n      class: \"top-0 mt-3\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"center\",\r\n      class: \"top-1/2 -translate-y-1/2\",\r\n    },\r\n    {\r\n      side: [\"left\", \"right\"],\r\n      alignment: \"end\",\r\n      class: \"bottom-0 mb-3\",\r\n    },\r\n  ],\r\n  defaultVariants: {\r\n    side: \"bottom\",\r\n    alignment: \"center\",\r\n  },\r\n});\r\n\r\nexport {\r\n  dropdownArrowVariants,\r\n  dropdownMenuItemVariants,\r\n  dropdownMenuVariants,\r\n};\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/dropdown/index.ts",
      "content": "import DropdownMenu from \"./DropdownMenu.astro\";\r\nimport DropdownMenuContent from \"./DropdownMenuContent.astro\";\r\nimport DropdownMenuGroup from \"./DropdownMenuGroup.astro\";\r\nimport DropdownMenuItem from \"./DropdownMenuItem.astro\";\r\nimport DropdownMenuLabel from \"./DropdownMenuLabel.astro\";\r\nimport DropdownMenuSeparator from \"./DropdownMenuSeparator.astro\";\r\nimport {\r\n  dropdownArrowVariants,\r\n  dropdownMenuItemVariants,\r\n  dropdownMenuVariants,\r\n} from \"./dropdownVariants\";\r\n\r\nexport {\r\n  dropdownArrowVariants,\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuGroup,\r\n  DropdownMenuItem,\r\n  dropdownMenuItemVariants,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  dropdownMenuVariants,\r\n};\r\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}

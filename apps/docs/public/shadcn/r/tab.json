{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "tab",
  "files": [
    {
      "path": "../src/components/ui/tab/index.ts",
      "content": "import Tab from \"./Tab.astro\";\r\nimport TabContent from \"./TabContent.astro\";\r\nimport TabList from \"./TabList.astro\";\r\nimport TabTrigger from \"./TabTrigger.astro\";\r\n\r\nexport { Tab, TabContent, TabList, TabTrigger };\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/tab/Tab.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { HTMLAttributes } from \"astro/types\";\r\n\r\ninterface Props extends HTMLAttributes<\"div\"> {\r\n  defaultValue?: string;\r\n}\r\n\r\nconst { class: className, defaultValue, ...attrs } = Astro.props;\r\n---\r\n\r\n<div\r\n  {...attrs}\r\n  data-tab\r\n  data-default-value={defaultValue}\r\n  class={cn(className)}\r\n>\r\n  <slot />\r\n</div>\r\n\r\n<script>\r\n  import { Tab } from \"./tab\";\r\n\r\n  function init() {\r\n    const tabs = document.querySelectorAll<HTMLElement>(\"[data-tab]\");\r\n    tabs.forEach((tab) => {\r\n      new Tab(tab);\r\n    });\r\n  }\r\n\r\n  init();\r\n  document.addEventListener(\"astro:page-load\", () => init());\r\n</script>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/tab/tab.ts",
      "content": "export class Tab {\r\n  private tab: HTMLElement;\r\n  private tabList: HTMLElement | null;\r\n  private tabsTrigger: NodeListOf<HTMLElement> | null;\r\n  private tabContents: NodeListOf<HTMLElement> | null;\r\n  private contentMap: Map<string, HTMLElement> = new Map();\r\n\r\n  constructor(tabWrapper: HTMLElement) {\r\n    this.tab = tabWrapper;\r\n    this.tabList = this.tab.querySelector(\"[data-tab-list]\");\r\n    this.tabsTrigger =\r\n      this.tabList?.querySelectorAll(\"[data-tab-trigger]\") || null;\r\n    this.tabContents = this.tab.querySelectorAll(\"[data-tab-content]\");\r\n\r\n    this.initializeContentMap();\r\n    this.init();\r\n  }\r\n\r\n  private init() {\r\n    this.setupAccessibility();\r\n    this.setupEventListeners();\r\n    this.setDefaultTab();\r\n  }\r\n\r\n  private initializeContentMap(): void {\r\n    this.tabContents?.forEach((content) => {\r\n      const value = content.dataset.value?.toLowerCase();\r\n      if (value) {\r\n        if (this.contentMap.has(value)) {\r\n          console.warn(\r\n            `Duplicate data-value \"${value}\" found in content elements`,\r\n          );\r\n        }\r\n        this.contentMap.set(value, content);\r\n      }\r\n    });\r\n  }\r\n\r\n  private setupAccessibility() {\r\n    this.tabsTrigger?.forEach((trigger) => {\r\n      const triggerValue = trigger.dataset.value?.toLowerCase();\r\n      if (!triggerValue) return;\r\n\r\n      const content = this.contentMap.get(triggerValue);\r\n      if (!content) {\r\n        console.warn(`No content found for trigger value: ${triggerValue}`);\r\n        return;\r\n      }\r\n\r\n      const uniqueId = Math.random().toString(36).substring(2, 9);\r\n      const triggerId = trigger.id || `tab-trigger-${triggerValue}-${uniqueId}`;\r\n      const contentId = content.id || `tab-content-${triggerValue}-${uniqueId}`;\r\n\r\n      trigger.setAttribute(\"id\", triggerId);\r\n      trigger.setAttribute(\"aria-controls\", contentId);\r\n\r\n      content.setAttribute(\"id\", contentId);\r\n      content.setAttribute(\"aria-labelledby\", triggerId);\r\n    });\r\n  }\r\n\r\n  private setupEventListeners() {\r\n    this.tabsTrigger?.forEach((trigger) => {\r\n      trigger.addEventListener(\"click\", () => this.activateTab(trigger));\r\n      trigger.addEventListener(\"keydown\", (e) =>\r\n        this.handleKeydown(e, trigger),\r\n      );\r\n    });\r\n  }\r\n\r\n  private handleKeydown(event: KeyboardEvent, item: HTMLElement) {\r\n    const items = Array.from(this.tabsTrigger || []);\r\n    const currentItemIndex = items.indexOf(item);\r\n\r\n    const keyActions: Record<string, () => void> = {\r\n      ArrowRight: () => this.setFocusItem(items, currentItemIndex + 1),\r\n      ArrowLeft: () => this.setFocusItem(items, currentItemIndex - 1),\r\n      Home: () => this.setFocusItem(items, 0),\r\n      End: () => this.setFocusItem(items, items.length - 1),\r\n    };\r\n\r\n    const action = keyActions[event.key];\r\n    if (action) {\r\n      event.preventDefault();\r\n      action();\r\n    }\r\n  }\r\n\r\n  private setFocusItem(items: HTMLElement[], index: number) {\r\n    const newIndex = index % items.length;\r\n    if (items[newIndex]) {\r\n      this.activateTab(items[newIndex]);\r\n    }\r\n  }\r\n\r\n  private setDefaultTab() {\r\n    const defaultTrigger = this.getDefaultTrigger();\r\n    if (defaultTrigger) {\r\n      this.activateTab(defaultTrigger);\r\n    }\r\n  }\r\n\r\n  private getDefaultTrigger(): HTMLElement | undefined {\r\n    if (!this.tabsTrigger) return;\r\n\r\n    const defaultValue = this.tab.dataset.defaultValue?.toLowerCase();\r\n    if (defaultValue) {\r\n      return Array.from(this.tabsTrigger || []).find(\r\n        (trigger) => trigger.dataset.value?.toLowerCase() === defaultValue,\r\n      );\r\n    }\r\n    return this.tabsTrigger[0];\r\n  }\r\n\r\n  private activateTab(trigger: HTMLElement) {\r\n    this.tabsTrigger?.forEach((t) => {\r\n      t.setAttribute(\"aria-selected\", \"false\");\r\n      t.setAttribute(\"data-selected\", \"false\");\r\n      t.setAttribute(\"tabindex\", \"-1\");\r\n    });\r\n\r\n    this.tabContents?.forEach((c) => {\r\n      c.setAttribute(\"data-state\", \"active\");\r\n      c.setAttribute(\"hidden\", \"\");\r\n    });\r\n\r\n    const triggerValue = trigger.dataset.value?.toLowerCase();\r\n    if (triggerValue) {\r\n      const content = this.contentMap.get(triggerValue);\r\n      if (content) {\r\n        content.removeAttribute(\"hidden\");\r\n        setTimeout(() => {\r\n          content.setAttribute(\"data-state\", \"active\");\r\n          trigger.setAttribute(\"aria-selected\", \"true\");\r\n          trigger.setAttribute(\"data-selected\", \"true\");\r\n          trigger.setAttribute(\"tabindex\", \"0\");\r\n        }, 100);\r\n        trigger.focus();\r\n      }\r\n    }\r\n  }\r\n}\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/tab/TabContent.astro",
      "content": "---\r\ninterface Props {\r\n  value: string;\r\n}\r\n\r\nconst { value } = Astro.props;\r\n---\r\n\r\n<div\r\n  role=\"tabpanel\"\r\n  aria-orientation=\"horizontal\"\r\n  data-tab-content\r\n  data-state=\"inactive\"\r\n  data-value={value}\r\n  hidden\r\n  class=\"mt-2 w-full\"\r\n>\r\n  <slot />\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/tab/TabList.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { HTMLAttributes } from \"astro/types\";\r\n\r\ninterface Props extends HTMLAttributes<\"div\"> {}\r\n\r\nconst { class: className } = Astro.props;\r\n---\r\n\r\n<div\r\n  role=\"tablist\"\r\n  data-tab-list\r\n  class={cn(\r\n    \"flex flex-row justify-between flex-wrap bg-surface border border-border p-1 rounded-lg w-fit\",\r\n    className,\r\n  )}\r\n>\r\n  <slot />\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/tab/TabTrigger.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { HTMLAttributes } from \"astro/types\";\r\n\r\ninterface Props extends HTMLAttributes<\"button\"> {\r\n  value: string;\r\n}\r\n\r\nconst { class: className, value } = Astro.props;\r\n---\r\n\r\n<button\r\n  role=\"tab\"\r\n  aria-orientation=\"horizontal\"\r\n  data-selected=\"false\"\r\n  data-value={value}\r\n  data-tab-trigger\r\n  class={cn(\r\n    \"rounded-sm px-3 py-1.5 flex justify-center gap-1.5 items-center font-medium cursor-pointer outline-none [&_svg]:pointer-events-none [&_svg]:shrink-0 transition-colors duration-100 ease-in data-[selected=true]:bg-secondary\",\r\n    className,\r\n  )}\r\n>\r\n  <slot />\r\n</button>\r\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}

{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "accordion",
  "files": [
    {
      "path": "../src/components/ui/accordion/Accordion.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { HTMLAttributes } from \"astro/types\";\r\n\r\ninterface Props extends HTMLAttributes<\"div\"> {\r\n  multiple?: boolean;\r\n}\r\n\r\nconst { class: className, multiple = false, ...attrs } = Astro.props;\r\n---\r\n\r\n<div\r\n  {...attrs}\r\n  data-accordion\r\n  data-multiple={multiple}\r\n  class={cn(\"w-full\", className)}\r\n>\r\n  <slot />\r\n</div>\r\n\r\n<script>\r\n  import { Accordion } from \"./accordion\";\r\n\r\n  function init() {\r\n    const accordions =\r\n      document.querySelectorAll<HTMLElement>(\"[data-accordion]\");\r\n    accordions.forEach((accordion) => {\r\n      new Accordion(accordion);\r\n    });\r\n  }\r\n\r\n  init();\r\n  document.addEventListener(\"astro:page-load\", () => init());\r\n</script>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/accordion/accordion.ts",
      "content": "interface AccordionItem extends HTMLElement {\r\n  trigger?: HTMLElement;\r\n  content?: HTMLElement;\r\n}\r\n\r\nexport class Accordion {\r\n  private wrapper: HTMLElement;\r\n  private items: NodeListOf<HTMLElement> | null;\r\n\r\n  constructor(accordionWrapper: HTMLElement) {\r\n    this.wrapper = accordionWrapper;\r\n    this.items = this.wrapper.querySelectorAll(\"[data-accordion-item]\");\r\n\r\n    this.init();\r\n  }\r\n\r\n  private init() {\r\n    const defaultOpenItems = [];\r\n\r\n    this.items?.forEach((item: AccordionItem) => {\r\n      const trigger = item.querySelector<HTMLElement>(\r\n        \"[data-accordion-trigger]\",\r\n      );\r\n      const content = item.querySelector<HTMLElement>(\r\n        \"[data-accordion-content]\",\r\n      );\r\n\r\n      if (trigger && content) {\r\n        item.trigger = trigger;\r\n        item.content = content;\r\n\r\n        this.setupAccessibility(item);\r\n        this.setupEventListeners(item);\r\n\r\n        if (item.dataset.defaultOpen === \"true\") {\r\n          if (\r\n            defaultOpenItems.length > 0 &&\r\n            this.wrapper.dataset.multiple !== \"true\"\r\n          ) {\r\n            console.warn(\r\n              \"Warning! This accordion is not configured to open multiple items by default. \" +\r\n                \"Only the first item will be opened.\" +\r\n                \"Consider adding the multiple prop to the accordion if you want to allow multiple items to be open by default.\",\r\n            );\r\n            return;\r\n          }\r\n\r\n          this.setContentHeight(content);\r\n          this.setState(item, \"open\");\r\n          defaultOpenItems.push(item);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private setupAccessibility(item: AccordionItem) {\r\n    if (item.trigger && item.content) {\r\n      const triggerId =\r\n        item.trigger.id ||\r\n        `accordion-id-${Math.random().toString(36).substring(2, 9)}`;\r\n      const contentId =\r\n        item.content.id ||\r\n        `accordion-id-${Math.random().toString(36).substring(2, 9)}`;\r\n\r\n      item.trigger.id = triggerId;\r\n      item.trigger.setAttribute(\"aria-controls\", contentId);\r\n\r\n      item.content.id = contentId;\r\n      item.content.setAttribute(\"aria-labelledby\", triggerId);\r\n      item.content.setAttribute(\"role\", \"region\");\r\n\r\n      this.setState(item, \"closed\");\r\n    }\r\n  }\r\n\r\n  private setupEventListeners(item: AccordionItem) {\r\n    if (!item.trigger && !item.content) return;\r\n\r\n    item.trigger?.addEventListener(\"click\", () =>\r\n      this.toggleAccordionItem(item),\r\n    );\r\n    item.trigger?.addEventListener(\"keydown\", (e) =>\r\n      this.handleKeydown(e, item),\r\n    );\r\n  }\r\n\r\n  private toggleAccordionItem(item: AccordionItem) {\r\n    if (item.trigger?.getAttribute(\"aria-expanded\") === \"true\") {\r\n      this.closeAccordionItem(item);\r\n    } else {\r\n      if (this.wrapper.dataset.multiple !== \"true\") {\r\n        this.closeAllContents();\r\n      }\r\n      this.openAccordionItem(item);\r\n    }\r\n  }\r\n\r\n  private openAccordionItem(item: AccordionItem) {\r\n    this.setState(item, \"open\");\r\n    if (item.content) {\r\n      this.setContentHeight(item.content);\r\n    }\r\n  }\r\n\r\n  private closeAccordionItem(item: AccordionItem) {\r\n    this.setState(item, \"closed\");\r\n    item.content!.style.maxHeight = \"0px\";\r\n  }\r\n\r\n  private closeAllContents() {\r\n    this.items?.forEach((item) => {\r\n      this.closeAccordionItem(item);\r\n    });\r\n  }\r\n\r\n  private handleKeydown(event: KeyboardEvent, item: AccordionItem) {\r\n    const items = Array.from(this.items || []);\r\n    const currentItemIndex = items.indexOf(item);\r\n\r\n    const keyActions: Record<string, () => void> = {\r\n      ArrowDown: () => this.setFocusItem(items, currentItemIndex + 1),\r\n      ArrowUp: () => this.setFocusItem(items, currentItemIndex - 1),\r\n      Home: () => this.setFocusItem(items, 0),\r\n      End: () => this.setFocusItem(items, items.length - 1),\r\n    };\r\n\r\n    const action = keyActions[event.key];\r\n    if (action) {\r\n      event.preventDefault();\r\n      action();\r\n    }\r\n  }\r\n\r\n  private setFocusItem(items: AccordionItem[], index: number) {\r\n    const newIndex = (index + items.length) % items.length;\r\n    if (items[newIndex].trigger) {\r\n      items[newIndex].trigger.focus();\r\n    }\r\n  }\r\n\r\n  private setContentHeight(content: HTMLElement) {\r\n    const height = content.scrollHeight + \"px\";\r\n    content.style.maxHeight = height;\r\n  }\r\n\r\n  private setState(item: AccordionItem, state: \"closed\" | \"open\") {\r\n    item.trigger?.setAttribute(\"data-state\", state);\r\n    item.trigger?.setAttribute(\"aria-expanded\", `${state === \"open\"}`);\r\n    item.content?.setAttribute(\"data-state\", state);\r\n  }\r\n}\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/accordion/AccordionItem.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { HTMLAttributes } from \"astro/types\";\r\n\r\ninterface Props extends HTMLAttributes<\"div\"> {\r\n  isOpen?: boolean;\r\n}\r\n\r\nconst { class: className, isOpen = false, ...attrs } = Astro.props;\r\n---\r\n\r\n<div\r\n  {...attrs}\r\n  data-accordion-item\r\n  data-default-open={isOpen}\r\n  class={cn(\"border-b border-border last:border-b-0\", className)}\r\n>\r\n  <slot />\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/accordion/AccordionTrigger.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { HTMLAttributes } from \"astro/types\";\r\n\r\ninterface Props extends HTMLAttributes<\"button\"> {}\r\n\r\nconst { class: className, ...attrs } = Astro.props;\r\n---\r\n\r\n<h3>\r\n  <button\r\n    {...attrs}\r\n    aria-expanded=\"false\"\r\n    data-accordion-trigger\r\n    class={cn(\r\n      \"flex items-center justify-between py-4 border-b border-border last:border-b-0 w-full text-start text-base font-medium cursor-pointer [&[data-state=open]>svg]:rotate-180\",\r\n      className,\r\n    )}\r\n  >\r\n    <slot />\r\n    <svg\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      stroke-width=\"2\"\r\n      stroke-linecap=\"round\"\r\n      stroke-linejoin=\"round\"\r\n      class=\"size-4 transform transition-transform duration-200\"\r\n      ><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path\r\n        d=\"M6 9l6 6l6 -6\"></path></svg\r\n    >\r\n  </button>\r\n</h3>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/accordion/AcordionContent.astro",
      "content": "---\r\nimport { cn } from \"@/lib/utils\";\r\nimport type { HTMLAttributes } from \"astro/types\";\r\n\r\ninterface Props extends HTMLAttributes<\"div\"> {}\r\n\r\nconst { class: className, ...attrs } = Astro.props;\r\n---\r\n\r\n<div\r\n  {...attrs}\r\n  role=\"region\"\r\n  data-accordion-content\r\n  data-state=\"closed\"\r\n  class={cn(\r\n    \"overflow-hidden transition-all duration-300 ease-in-out data-[state=closed]:max-h-0\",\r\n    className,\r\n  )}\r\n>\r\n  <div class=\"pb-4\">\r\n    <slot />\r\n  </div>\r\n</div>\r\n",
      "type": "registry:ui"
    },
    {
      "path": "../src/components/ui/accordion/index.ts",
      "content": "import Accordion from \"./Accordion.astro\";\r\nimport AccordionItem from \"./AccordionItem.astro\";\r\nimport AccordionTrigger from \"./AccordionTrigger.astro\";\r\nimport AccordionContent from \"./AcordionContent.astro\";\r\n\r\nexport { Accordion, AccordionContent, AccordionItem, AccordionTrigger };\r\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}
